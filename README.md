# Развертывание СОПКА

## Подготовили:

| Студент | Зона ответственности |
|---------|----------------------|
| Старков Дмитрий | **LDAP** / **Mail** / **Telephony** |
| Седова Ирина | **Scada** / **Suricata** |
| Николаев Вадим | **WWW** / **Radius** |
| Мамонов Антон | **Messenger** |
| Убогов Сергей | **Postgresql** |
| Махаев Семен | **DNS** |

# Cхема сети

![image](https://user-images.githubusercontent.com/11780431/50404328-5d332f80-07c8-11e9-8249-fcc1ed7689d6.png)

# Как запускать
---

### database

1. Запускаем виртуальную машину **database**
2. Авторизуемся пользователем **root** (без пароля)
3. Запускаем сервис коммандой **start**
4. Переходим по адресу: `http://<ip>`
5. Видим административный интерфейс базы данных

### pgadmin

* Можно создавать и удалять базы данных
* Можно создавать и удалять таблицы
* Можно смотреть текущие исполняемые запросы

---

### messenger

1. Запускаем виртуальную машину **messenger**
2. Авторизуемся пользователем **root** (без пароля)
3. Запускаем сервис коммандой **start**
4. Переходим по адресу: `http://<ip>`
5. Настраиваем мессенджер для организации

---

### www

1. Запускаем виртуальную машину **www**
2. Авторизуемся пользователем **root** (без пароля)
3. Задаем адрес ВМ с базой данных **export PG_HOST=<ip>**
4. Запускаем сервис коммандой **start**
5. Переходим по адресу: `http://<ip>`

Администратор форума: *_логин_* - **admin** *_пароль_* - **adminadmin**

---

### telephony

1. Запускаем виртуальную машину **telephony**
2. Авторизуемся пользователем **root** (без пароля)
3. Запускаем сервис коммандой **start**
4. Переходим по адресу: `http://<ip>/admin`
5. Видим административный интерфейс **FreePBX**
6. Производим первичную настройку

---

### dns-server

1. Запускаем виртуальную машину **dns-server**
2. Авторизуемся пользователем **root** (без пароля)
3. Запускаем сервис коммандой **start**
4. Переходим по адресу: `https://<ip>`
5. Видим административный интерфейс **webmin**

### webmin

1. Авторизуемся **root** / **password**
2. Открываем пункт меню **Servers/BIND DNS Server**
3. Создаем мастер-зону **Create master zone**
4. Добавляем домены **Add record**
5. Перезагружаем конфигурацию **Apply configuration**

---

### scada

1. Запускаем виртуальную машину **scada**
2. Авторизуемся пользователем **root** (без пароля)
3. Запускаем сервис коммандой **start**
4. Переходим по адресу: `http://<ip>/ScadaBR`
6. Производим необходимую настройку

---

### ldap

1. Запускаем виртуальную машину **ldap**
2. Авторизуемся пользователем **root** (без пароля)
3. Запускаем сервис коммандой **start**
4. Переходим по адресу: `http://<ip>`
5. Видим административный интерфейс **OpenLDAP**

### ldap-admin

1. Авторизуемся **cn=admin,dc=example,dc=org** / **admin**
2. Производим необходимые настройки

---

### mail-server

1. Запускаем виртуальную машину **mail-server**
2. Авторизуемся пользователем **root** (без пароля)
3. Задаем адрес ВМ с _*ldap*_ **export LDAP_IP=<ip>** 
4. Запускаем сервис коммандой **start**

---

### vpn-server

1. Запускаем виртуальную машину **vpn-server**
2. Авторизуемся пользователем **root** (без пароля)
3. Запускаем предварительную настройку коммандой **prestart**
4. Запускаем сервис коммандой **start**
5. Открываем соседнюю консоль сочитанием клавиш **Alt + F2**
6. Добавляем нового пользователя командой **CLIENTNAME=user new-user**
7. Переходим по адресу: `http://<ip>` и скачиваем сгенерированную конфигурацию

---

### radius

1. Запускаем виртуальную машину **radius**
2. По умолчанию Radius сервер запускается, после старта виртуальной машины
3. Запускается демон **freeradius**
4. Авторизуемся **root** / **qazwsxed**
5. *_ip адрес_* - 11.0.0.2
6. В базе RADIUS-сервера есть 1 пользователь **user1** с паролем **password**
7. Разрешено только одно подключение данного пользователя.
 